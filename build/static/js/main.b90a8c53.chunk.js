(this.webpackJsonpmicroblog_frontend=this.webpackJsonpmicroblog_frontend||[]).push([[0],{208:function(e,t,a){e.exports=a(366)},217:function(e,t,a){},366:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(44),o=a.n(c),i=a(21),u=a(22),s=a(51),l=(a(217),a(8)),m=a.n(l),p=a(16),f=a(383),d=a(382),g=a(376),v=a(381),h=a(380),b=a(378),E=a(24),w=function(e,t){var a=Object(n.useState)(t||""),r=Object(E.a)(a,2),c=r[0],o=r[1];return{type:e,value:c,onChange:function(e){o(e.target.value)},clear:function(){o("")}}},O=a(30),x=a(38),j=a.n(x),y=null,N=function(){return{headers:{Authorization:y}}},k={uploadFile:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat("/api/utils","/upload"),t,N());case 2:return a=e.sent,console.log("return",a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){y="bearer ".concat(e)},destroyToken:function(){y=null}},S={checkUserNameExisted:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat("/api/user","/isExist"),{userName:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat("/api/user","/register"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat("/api/user","/login"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeBasicInfo:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.patch("".concat("/api/user","/changeInfo/").concat(t),a,N());case 2:return n=e.sent,console.log("returnUser",n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),changePwd:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.patch("".concat("/api/user","/changePwd/").concat(t),a,N());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P="loggedInUser",R={userNameExisted:!1},A=function(e){window.localStorage.setItem(P,JSON.stringify(e)),k.setToken(e.token)},T=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.checkUserNameExisted(e);case 2:n=t.sent,r=!!n.data,a({type:"USERNAME_EXISTED",userNameExisted:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.destroyToken(),window.localStorage.removeItem(P),t({type:"CLEAR_USER"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER":return R;case"USERNAME_EXISTED":return U({},e,{userNameExisted:t.userNameExisted});case"SET_USER":return t.loggedInUser;case"CLEAR_USER":return R;case"UPDATE_USER_INFO":return t.updatedUser;default:return e}},D=function(e){var t=e.message,a=e.error,n=void 0!==a&&a,r=e.timeout,c=void 0===r?5e3:r,o={message:t,error:n};return function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_NOTIFICATION",content:o}),setTimeout((function(){t({type:"CLEAR_NOTIFICATION"})}),c);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.content;case"CLEAR_NOTIFICATION":return{};default:return e}},_={login:function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.login(e);case 2:n=t.sent,r=n.data,A(r),a({type:"SET_USER",loggedInUser:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setNotification:D},B=Object(s.g)(Object(i.b)((function(e){return{user:e.user}}),_)((function(e){var t=w("text"),a=w("password"),n=0===t.value.length||0===a.value.length,c=function(){var n=Object(p.a)(m.a.mark((function n(r){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),c={userName:t.value,password:a.value},n.prev=2,n.next=5,e.login(c);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),e.setNotification({message:"Login failed, wrong username or password",error:!0});case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}(),o=(e.location.state||{from:{pathname:"/home"}}).from;return e.user.token?(e.setNotification({message:"You have logged in",error:!1}),r.a.createElement("div",{className:"redirect"},r.a.createElement(s.a,{to:o}))):r.a.createElement("div",null,r.a.createElement(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(f.a.Column,{style:{maxWidth:450}},r.a.createElement(d.a,{as:"h2",color:"teal",textAlign:"center"},"Log in to your account"),r.a.createElement(g.a,{size:"large",onSubmit:c},r.a.createElement(v.a,{stacked:!0},r.a.createElement(g.a.Input,Object.assign({className:"userName",fluid:!0,icon:"user",iconPosition:"left",placeholder:"User Name"},t,{required:!0})),r.a.createElement(g.a.Input,Object.assign({className:"pwd",fluid:!0,icon:"lock",placeholder:"Password"},a,{required:!0})),r.a.createElement(h.a,{type:"submit",color:"teal",fluid:!0,size:"large",disabled:n},"Login"))),r.a.createElement(b.a,null,"New to us? ",r.a.createElement(u.b,{to:"/register"},"Sign Up")))))}))),z=function(e,t){var a=Object(n.useState)(e),r=Object(E.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c},M=function(e){var t=e.fieldName,a=e.input,n=e.minLength,c=e.maxLength,o=e.extraRequirement,i=e.extraErrorMessage;return a?n&&c&&(a.length<n||a.length>c)?r.a.createElement("p",{style:{color:"red"}},t," should be between ",n," and ",c," characters"):!1===o?r.a.createElement("p",{style:{color:"red"}},i):r.a.createElement("p",{style:{color:"green"}},"Valid ",t):null},q=function(){return r.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}},r.a.createElement("h3",null,"You have already logged in, please go to the",r.a.createElement(u.b,{to:"/home"}," main page")," directly"))},Y={checkUserNameExisted:T,register:function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.register(e);case 2:a({type:"REGISTER"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setNotification:D},J=Object(s.g)(Object(i.b)((function(e){return{user:e.user,file:e.file}}),Y)((function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],o=a[1],i=w("text"),l=w("password"),O=w("password"),x=z(i.value,500);Object(n.useEffect)((function(){x&&function(){var t=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkUserNameExisted(x);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[x]);var j=e.user.userNameExisted||i.value.length<3||i.value.length>255||l.value.length<3||l.value.length>255||l.value!==O.value,y=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={userName:i.value,password:O.value},t.prev=2,t.next=5,e.register(n);case 5:o(!0),e.setNotification({message:"Register succeeded, please log in",error:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.setNotification({message:"Register failed",error:!0});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}();return c?r.a.createElement("div",{className:"redirect"},r.a.createElement(s.a,{to:"/login"})):e.user.token?r.a.createElement(q,null):r.a.createElement("div",null,r.a.createElement(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(f.a.Column,{style:{maxWidth:450}},r.a.createElement(d.a,{as:"h2",color:"teal",textAlign:"center"},"Sign Up"),r.a.createElement(g.a,{size:"large",onSubmit:y},r.a.createElement(v.a,{stacked:!0},r.a.createElement(g.a.Input,Object.assign({className:"userName",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username (between 3 and 255 characters)"},i,{required:!0})),r.a.createElement(M,{fieldName:"Username",input:i.value,minLength:3,maxLength:255,extraRequirement:!e.user.userNameExisted,extraErrorMessage:"User name is already existed"}),r.a.createElement(g.a.Input,Object.assign({className:"pwd",fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password (between 3 and 255 characters)"},l,{required:!0})),r.a.createElement(M,{fieldName:"Password",input:l.value,minLength:3,maxLength:255}),r.a.createElement(g.a.Input,Object.assign({className:"pwdConfirm",fluid:!0,placeholder:"Confirm Your Password"},O,{required:!0})),r.a.createElement(M,{fieldName:"Password confirmation",input:O.value,extraRequirement:l.value===O.value,extraErrorMessage:"Confirmation does not match the password"}),r.a.createElement(h.a,{color:"teal",fluid:!0,size:"large",disabled:j},"Sign Up"))),r.a.createElement(b.a,null,"Already have an account? ",r.a.createElement(u.b,{to:"/login"},"Back to login")))))}))),G=a(384),H=Object(i.b)((function(e){return{notification:e.notification}}))((function(e){var t=e.notification,a=t.message,n=t.error;return a?r.a.createElement(G.a,{visible:!!a,animation:"fly down",duration:250},r.a.createElement("div",{style:{position:"fixed !important",top:"32px",right:"0",left:"0",textAlign:"center",zIndex:"10000"}},n?r.a.createElement(b.a,{floating:!0,color:"red",size:"large"},a):r.a.createElement(b.a,{floating:!0,color:"green",size:"large"},a))):null})),W=a(127),X=a(375),V=a(199),K=function(e){var t=Object(n.useState)([]),a=Object(E.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)([]),u=Object(E.a)(i,2),s=u[0],l=u[1],d=w("text"),v=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=null,c.length>0&&(n=new FormData,c.map((function(e){return n.append("file",e)}))),t.next=5,e.createBlog(e.userId,d.value,n);case 5:o([]),l([]),d.clear(),e.setNotification({message:"You created a blog",error:!1});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(g.a,{onSubmit:v},r.a.createElement(g.a.Field,null,r.a.createElement(X.a,Object.assign({placeholder:"new blog...(click Choose Files below to upload max 5 images)"},d,{style:{minHeight:100},clear:"clear"})),r.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];o([].concat(Object(W.a)(c),[t])),l([].concat(Object(W.a)(s),[URL.createObjectURL(t)]))}}),r.a.createElement(f.a,null,r.a.createElement(f.a.Row,{columns:5},s.map((function(e){return r.a.createElement(f.a.Column,{key:e},r.a.createElement(V.a,{src:e,size:"small"}))}))))),r.a.createElement(h.a,null,"Publish your microblog")))},Q={createBlog:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat("/api/blog","/create/").concat(t),a,N());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_BLOG":return t.publishedBlog;default:return e}},te={createBlog:function(e,t,a){return function(){var n=Object(p.a)(m.a.mark((function n(r){var c,o,i,u,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c={content:t},null===a){n.next=8;break}return n.next=4,k.uploadFile(a);case 4:o=n.sent,i=o.data,console.log("suc model",o.data[0]),c=$({},c,{urls:i});case 8:return n.next=10,Q.createBlog(e,c);case 10:u=n.sent,s=u.data,r({type:"CREATE_BLOG",publishedBlog:s});case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setNotification:D},ae=Object(i.b)((function(e){return{user:e.user,blog:e.blog}}),te)((function(e){return r.a.createElement("div",null,r.a.createElement(K,{userId:e.user.id,createBlog:e.createBlog,setNotification:e.setNotification}))})),ne=a(194),re=Object(s.g)(Object(i.b)((function(e){return{user:e.user}}))((function(e){var t=!!e.user.token,a=e.component,n=Object(ne.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}))),ce=function(){return r.a.createElement("div",null,"The page cannot be found...")},oe=a(379),ie=a(377),ue={logout:C},se=Object(i.b)((function(e){return{user:e.user}}),ue)((function(e){var t=Object(n.useState)(e.user.token?"Home":"Login"),a=Object(E.a)(t,2),c=a[0],o=a[1],i=function(e,t){var a=t.name;o(a)};return e.user.token?r.a.createElement(oe.a,{tabular:!0},r.a.createElement(oe.a.Item,{name:"Home",active:"Home"===c,onClick:i,as:u.b,to:"/home"}),r.a.createElement(oe.a.Item,{name:"My blogs",active:"My blogs"===c,onClick:i,as:u.b,to:"/myblogs"}),r.a.createElement(oe.a.Item,{name:"Discover",active:"Discover"===c,onClick:i,as:u.b,to:"/discover"}),r.a.createElement(oe.a.Menu,{position:"right"},r.a.createElement(ie.a,{item:!0,text:"Setting"},r.a.createElement(ie.a.Menu,null,r.a.createElement(ie.a.Item,{as:u.b,to:"/setting"},"Account setting"),r.a.createElement(ie.a.Item,null,r.a.createElement(h.a,{onClick:e.logout},r.a.createElement(u.b,{to:"/login"},"Logout"))))))):r.a.createElement(oe.a,{tabular:!0},r.a.createElement(oe.a.Item,{name:"Login",active:"Login"===c,onClick:i,as:u.b,to:"/login"}),r.a.createElement(oe.a.Item,{name:"Register",active:"Register"===c,onClick:i,as:u.b,to:"/register"}))})),le={checkUserNameExisted:T,changeBasicInfo:function(e,t,a){return function(){var n=Object(p.a)(m.a.mark((function n(r){var c,o,i,u,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c={newUserName:t},null===a){n.next=8;break}return n.next=4,k.uploadFile(a);case 4:o=n.sent,i=o.data[0],console.log("suc model",o.data[0]),c=U({},c,{newPicture:i});case 8:return n.next=10,S.changeBasicInfo(e,c);case 10:u=n.sent,s=u.data,A(s),r({type:"UPDATE_USER_INFO",updatedUser:s});case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},changePwd:function(e,t,a){return function(){var n=Object(p.a)(m.a.mark((function n(r){var c,o,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={pwd:t,newPwd:a},n.next=3,S.changePwd(e,c);case 3:o=n.sent,i=o.data,A(i),r({type:"UPDATE_USER_INFO",updatedUser:i});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setNotification:D},me=Object(i.b)((function(e){return{user:e.user}}),le)((function(e){var t=w("text",e.user.userName),a=z(t.value,500),c=w("password"),o=w("password"),i=w("password"),u=Object(n.useState)(null),s=Object(E.a)(u,2),l=s[0],v=s[1],b=Object(n.useState)(""),O=Object(E.a)(b,2),x=O[0],j=O[1];Object(n.useEffect)((function(){a&&function(){var t=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkUserNameExisted(a);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[a]);var y=function(){var a=Object(p.a)(m.a.mark((function a(n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=null,null!==l&&(r=new FormData).append("file",l),a.prev=3,a.next=6,e.changeBasicInfo(e.user.id,t.value,r);case 6:e.setNotification({message:"You have changed your basic information",error:!1}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),e.setNotification({message:"Fail to change basic information",error:!0});case 12:case"end":return a.stop()}}),a,null,[[3,9]])})));return function(e){return a.apply(this,arguments)}}(),N=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,e.changePwd(e.user.id,c.value,o.value);case 4:e.setNotification({message:"You have changed your password",error:!1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.setNotification({message:"Fail to change password, please make sure that your old password is correct",error:!0});case 10:c.clear(),o.clear(),i.clear();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),k=e.user.userNameExisted&&t.value!==e.user.userName||t.value.length<3||t.value.length>255,S=o.value.length<3||o.value.length>255||o.value!==i.value;return r.a.createElement(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(f.a.Column,{style:{maxWidth:450}},r.a.createElement(d.a,{as:"h2",color:"teal",textAlign:"center"},"Account Setting"),r.a.createElement(d.a,{as:"h3",color:"teal",textAlign:"center"},"Basic information"),r.a.createElement(g.a,{onSubmit:y},r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"User name"),r.a.createElement("input",Object.assign({},t,{clear:"clear"})),r.a.createElement(M,{fieldName:"Username",input:t.value,minLength:3,maxLength:255,extraRequirement:!e.user.userNameExisted||t.value===e.user.userName,extraErrorMessage:"User name is already existed"})),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Change head portrait"),r.a.createElement(g.a.Input,{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];v(t),j(URL.createObjectURL(t))}}),r.a.createElement(V.a,{src:""!==x?x:e.user.picture,size:"small"})),r.a.createElement(h.a,{color:"teal",fluid:!0,size:"large",disabled:k},"Save basic information changes")),r.a.createElement(d.a,{as:"h3",color:"teal",textAlign:"center"},"Password"),r.a.createElement(g.a,{onSubmit:N},r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Current password"),r.a.createElement("input",Object.assign({placeholder:"current password"},c,{clear:"clear"}))),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"New password"),r.a.createElement("input",Object.assign({placeholder:"new password"},o,{clear:"clear"})),r.a.createElement(M,{fieldName:"Password",input:o.value,minLength:3,maxLength:255})),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Confirm new password"),r.a.createElement("input",Object.assign({placeholder:"new password confirmation"},i,{clear:"clear"}))),r.a.createElement(M,{fieldName:"Password confirmation",input:i.value,extraRequirement:o.value===i.value,extraErrorMessage:"Confirmation does not match the password"}),r.a.createElement(h.a,{color:"teal",fluid:!0,size:"large",disabled:S},"Save new password"))))})),pe={initUser:function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=window.localStorage.getItem(P))&&(n=JSON.parse(a),k.setToken(n.token),t({type:"SET_USER",loggedInUser:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},fe=Object(i.b)((function(e){return{user:e.user}}),pe)((function(e){return Object(n.useEffect)((function(){console.log("init"),e.initUser()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(H,null),r.a.createElement(u.a,null,r.a.createElement(se,null),r.a.createElement(s.d,null,r.a.createElement(re,{path:"/home",component:ae}),r.a.createElement(re,{path:"/setting",component:me}),r.a.createElement(s.b,{path:"/login",render:function(e){return r.a.createElement("div",null,r.a.createElement(B,{history:e}))}}),r.a.createElement(s.b,{path:"/register",render:function(e){return r.a.createElement("div",null,r.a.createElement(J,{history:e}))}}),r.a.createElement(s.b,{component:ce}))))})),de=(a(363),a(57)),ge=a(196),ve=a(197),he=a(198),be=a.n(he),Ee=Object(de.combineReducers)({user:L,notification:F,blog:ee}),we=Object(de.createStore)(Ee,Object(ve.composeWithDevTools)(Object(de.applyMiddleware)(ge.a,(function(e){return function(t){return function(a){var n=localStorage.getItem(P)&&JSON.parse(localStorage.getItem(P))&&JSON.parse(localStorage.getItem(P)).token;n&&be()(n).exp<Date.now()/1e3&&(e.dispatch(C()),window.alert("Your session expired, please login again")),t(a)}}}))));o.a.render(r.a.createElement(i.a,{store:we},r.a.createElement(fe,null)),document.getElementById("root"))}},[[208,1,2]]]);
//# sourceMappingURL=main.b90a8c53.chunk.js.map